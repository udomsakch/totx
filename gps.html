<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ ‡∏≠‡∏™‡∏°‡∏ó</title>
  <style>
    body {
      font-family: 'Kanit', sans-serif;
      text-align: center;
      background: linear-gradient(to bottom, #f5f7fa, #c3cfe2);
      padding: 2em;
      margin: 0;
    }
    h1 {
      font-size: 2em;
      color: #333;
    }
    .value {
      font-size: 2.5em;
      color: #2c3e50;
      margin-top: 1em;
    }
    .label {
      font-size: 1.2em;
      color: #555;
      margin-top: 1.5em;
    }
    .error {
      color: red;
      font-size: 1.2em;
      margin-top: 2em;
    }
  </style>
</head>
<body>
  <h1>üì° ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏ ‡∏≠‡∏™‡∏°‡∏ó ‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß</h1>
  <div class="value" id="distance">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á...</div>
  <div class="label" id="gps">-</div>
  <div class="error" id="error"></div>

  <script>
    // ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ ‡∏≠‡∏™‡∏°‡∏ó ‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß
    const stationLat = 13.780971260154866;
    const stationLon = 100.63563199819573;

    function toRad(deg) {
      return deg * Math.PI / 180;
    }

    function haversine(lat1, lon1, lat2, lon2) {
      const R = 6371e3; // ‡πÄ‡∏°‡∏ï‡∏£
      const œÜ1 = toRad(lat1);
      const œÜ2 = toRad(lat2);
      const ŒîœÜ = toRad(lat2 - lat1);
      const ŒîŒª = toRad(lon2 - lon1);

      const a = Math.sin(ŒîœÜ / 2) ** 2 +
                Math.cos(œÜ1) * Math.cos(œÜ2) *
                Math.sin(ŒîŒª / 2) ** 2;
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

      return R * c;
    }

    function updateLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          pos => {
            const userLat = pos.coords.latitude;
            const userLon = pos.coords.longitude;

            const dist = haversine(stationLat, stationLon, userLat, userLon);
            const km = (dist / 1000).toFixed(2);

            document.getElementById("distance").textContent =
              `üìç ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏Ø ${km} ‡∏Å‡∏°.`;

            document.getElementById("gps").textContent =
              `‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ${userLat.toFixed(5)}, ${userLon.toFixed(5)}`;

            document.getElementById("error").textContent = '';
          },
          err => {
            document.getElementById("error").textContent =
              `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÑ‡∏î‡πâ: ${err.message}`;
            document.getElementById("distance").textContent = '-';
            document.getElementById("gps").textContent = '-';
          }
        );
      } else {
        document.getElementById("error").textContent =
          "‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö GPS";
      }
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    updateLocation();
    setInterval(updateLocation, 3000);
  </script>

  <!-- ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏à‡∏≤‡∏Å Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600&display=swap" rel="stylesheet">
</body>
</html>
